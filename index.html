<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>happy new year by AlexDev</title>
  </head>

   <!-- 

Contáctame:

    * Invitame un café
 https://buymeacoffee.com/alexx.dev

    * Portafolio Web
 https://alexxdev.vercel.app

    * Sigueme en tiktok
 https://www.tiktok.com/@alexx.dev?is_from_webapp=1&sender_device=pc 
 
    *Canal de WhatsApp
 https://whatsapp.com/channel/0029VazQEXq90x2vIdNkrH1p

 
 WhatsApp: +52 1 55 6628 1018

-->
    
  <body>
  
    <script>
      let chars, particles, canvas, ctx, w, h, current;
let duration = 8000; 
let str = ['Happy', 'New', 'Year', '2026'];
let stars = []; 

init();
resize();
requestAnimationFrame(render);
addEventListener('resize', resize);

function makeChar(c) {
    let tmp = document.createElement('canvas');
    let size = tmp.width = tmp.height = w < 400 ? 200 : 400;
    let tmpCtx = tmp.getContext('2d');
    tmpCtx.font = 'bold ' + size + 'px Arial';
    tmpCtx.fillStyle = 'white';
    tmpCtx.textBaseline = "middle";
    tmpCtx.textAlign = "center";
    tmpCtx.fillText(c, size / 2, size / 2);
    
    let char2 = tmpCtx.getImageData(0, 0, size, size);
    let char2particles = [];
    let validPixels = [];

    for (let y = 0; y < size; y += 2) { 
        for (let x = 0; x < size; x += 2) {
            let offset = (y * size * 4) + (x * 4);
            if (char2.data[offset] > 128) { 
                validPixels.push([x - size / 2, y - size / 2]);
            }
        }
    }

    if (validPixels.length === 0) return [];

    for (let i = 0; i < particles; i++) {
        let p = validPixels[Math.floor(Math.random() * validPixels.length)];
        let jitter = 2;
        char2particles.push([
            p[0] + (Math.random() - 0.5) * jitter, 
            p[1] + (Math.random() - 0.5) * jitter
        ]);
    }
    return char2particles;
}

function init() {
    canvas = document.createElement('canvas');
    document.body.innerHTML = ''; 
    document.body.append(canvas);
    document.body.style.margin = '0';
    document.body.style.overflow = 'hidden';
    document.body.style.background = 'radial-gradient(circle, #0a0a0a 0%, #000000 100%)'; 
    ctx = canvas.getContext('2d');
    
    for(let i=0; i<350; i++) { 
        stars.push({
            x: Math.random(),
            y: Math.random(),
            size: Math.random() * 1.5, 
            blink: Math.random()
        });
    }
}

function resize() {
    w = canvas.width = innerWidth;
    h = canvas.height = innerHeight;
    particles = innerWidth < 400 ? 600 : 1200; 
}

function makeChars(t) {
    let actual = parseInt(t / duration) % str.length;
    if (current === actual) return;
    current = actual;
    chars = [...str[actual]].map(makeChar);
}

function render(t) {
    makeChars(t);
    requestAnimationFrame(render);
    
    ctx.globalCompositeOperation = 'source-over';
    ctx.fillStyle = '#00000030'; 
    ctx.fillRect(0, 0, w, h);
    
    ctx.fillStyle = 'white';
    stars.forEach(s => {
        let opacity = 0.2 + 0.8 * Math.sin(t * 0.003 + s.blink * 10);
        ctx.globalAlpha = opacity;
        ctx.fillRect(s.x * w, s.y * h, s.size, s.size);
    });
    ctx.globalAlpha = 1;

    ctx.globalCompositeOperation = 'lighter'; 
    
    if (chars) {
        chars.forEach((pts, i) => firework(t, i, pts));
    }
}

function firework(t, i, pts) {
    t -= i * 250;
    let id = i + chars.length * parseInt(t - t % duration);
    t = t % duration / duration;
    
    let letterSpacing = w < 600 ? 140 : 220;
    let dx = (w / 2) + (i - (chars.length - 1) / 2) * letterSpacing;
    dx += Math.min(0.33, t) * 50 * Math.sin(id); 
    
    let dy = h * 0.5;
    dy += Math.sin(id * 4547.411) * h * 0.1;
    
    if (t < 0.33) {
        rocket(dx, dy, id, t * 3);
    } else {
        let explosionT = Math.min(1, Math.max(0, t - 0.33) * 2);
        explosion(pts, dx, dy, id, explosionT);
    }
}

function rocket(x, y, id, t) {
    ctx.fillStyle = '#ffeba7'; 
    let r = 2 - 2 * t + Math.pow(t, 15 * t) * 16;
    y = h - y * t;
    circle(x, y, r);
}

function explosion(pts, x, y, id, t) {
    const ease = (t) => 1 - Math.pow(1 - t, 3);
    let t_eased = ease(t);

    let hue = (id * 60) % 360; 
    let breakTime = 0.7; 
    let drift = Math.max(0, t - breakTime);
    let gravity = drift * drift * 1500; 

    pts.forEach((xy, i) => {
        let angle = i; 
        let speed = (i % 5) * drift * 40; 
        let vx = Math.cos(angle) * speed;
        let vy = Math.sin(angle) * speed;
        let spread = 1.6; 
        
        let px = x + (xy[0] * t_eased * spread) + vx;
        let py = (h - y) + (xy[1] * t_eased * spread) + vy + gravity;
        
        let r = (3.5 - t * 3.5); 
        
        if (r > 0.1) {
            
            let sparkle = Math.random();
            if (sparkle > 0.99 && drift > 0) { 
                ctx.fillStyle = 'white'; 
            } else {
              
                let lightness = 55; 
                if (drift > 0) lightness -= drift * 150; 
                ctx.fillStyle = `hsl(${hue}, 100%, ${Math.max(0, lightness)}%)`;
            }
            
            circle(px, py, r);
        }
    });
}

function circle(x, y, r) {
    ctx.beginPath();
    ctx.arc(x, y, r, 0, Math.PI * 2);
    ctx.fill();
}
    </script>
  </body>

   <!-- 

Contáctame:

    * Invitame un café
 https://buymeacoffee.com/alexx.dev

    * Portafolio Web
 https://alexxdev.vercel.app

    * Sigueme en tiktok
 https://www.tiktok.com/@alexx.dev?is_from_webapp=1&sender_device=pc 
 
    *Canal de WhatsApp
 https://whatsapp.com/channel/0029VazQEXq90x2vIdNkrH1p

 
 WhatsApp: +52 1 55 6628 1018

-->
  
</html>
